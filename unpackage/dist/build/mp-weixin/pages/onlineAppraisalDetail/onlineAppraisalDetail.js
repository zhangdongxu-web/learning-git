(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/onlineAppraisalDetail/onlineAppraisalDetail"],{"12de":function(t,e,i){"use strict";var n=i("52c7"),o=i.n(n);o.a},"186d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"1c25":function(t,e,i){"use strict";i.r(e);var n=i("ae8c"),o=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);e["default"]=o.a},"205f":function(t,e,i){"use strict";var n=i("48b2"),o=i.n(n);o.a},"2ff2":function(t,e,i){"use strict";i.r(e);var n=i("186d"),o=i("1c25");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("205f"),i("12de");var a=i("2877"),l=Object(a["a"])(o["default"],n["a"],n["b"],!1,null,"5d933818",null);e["default"]=l.exports},"48b2":function(t,e,i){},"4d87":function(t,e,i){"use strict";(function(t){i("5605"),i("921b");n(i("66fd"));var e=n(i("2ff2"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"52c7":function(t,e,i){},ae8c:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{bagstyleIndex:0,photoList:["",""],id:"",type:"",auth:"",data:{name:"",which:"12345",details:[]},flag:0,identTab:0,bagstyleList:[],yiju:[],yijuIndex:0,result:[{id:"-1",name:"请选择您的鉴定结论真品或者伪品"},{id:"1",name:"真品"},{id:"0",name:"伪品"}],resultIndex:0,selectLen:0,selectCommont:[],onlinedesc:[],totalityTxt:[]}},computed:{grades:function(){var t=0,e=this.data.details?this.data.details.reduce(function(e,i){return t+=parseInt(i.score||0)*i.weight},0):0;return e=0==e?0:(e/100).toFixed(2),e}},onLoad:function(e){console.log("option is ".concat(JSON.stringify(e))),this.id=e.id,this.type=e.type,this.auth=e.auth,this.identTab=e.identTab,this.flag=3==this.type?1==this.auth?1:0:"",t.setNavigationBarTitle({title:this.flag?"鉴定中详情":"待鉴定详情"}),this.getData(),this.getBasisList()},onShow:function(){var e=this,i={token:t.getStorageSync("token")};this.$requestApi.onlinedesc(i).then(function(t){console.log(t),t.data.map(function(t,e){t.flag=!1}),e.onlinedesc=t.data,e.selectCommont=t.data})},methods:{changeCommont:function(){this.$refs.comment.open()},commentClose:function(){this.$refs.comment.close()},commentSave:function(){this.onlinedesc=this.selectCommont,this.selectLen=this.selectCommont.filter(function(t){return 1==t.select}).length,this.$refs.comment.close()},check:function(t,e,i){console.log(t,e,i,"qqqqq"),i.target?e.select=!0:e.select=!1,"false"==t?this.selectCommont.map(function(t,e){"true"==t.nature&&(t.flag=!0)}):this.selectCommont.map(function(t,e){"false"==t.nature&&(t.flag=!0)})},checkboxChange:function(e){var i=this;console.log(e,"eeeeee"),this.totalityTxt=e.detail.value,0==e.detail.value.length&&this.selectCommont.map(function(e,n){console.log(56565656);var o={token:t.getStorageSync("token")};i.$requestApi.onlinedesc(o).then(function(t){console.log(t),t.data.map(function(t,e){t.flag=!1}),i.selectCommont=t.data})}),console.log(this.totalityTxt,"8989898")},changeScore:function(t,e){console.log(t,7777),t>10&&(this.data.details[e].score=10)},getBasisList:function(){var t=this;this.$requestApi.getBasisList().then(function(e){e.data.list.unshift({id:0,name:"请选择鉴定依据"}),t.yiju=e.data.list})},startAppraisal:function(){var t=this,e={id:this.id};1==this.identTab?this.$requestApi.getStartGoodsAuth(e).then(function(e){t.goRoom()}):this.$requestApi.startonlineauth(e).then(function(e){t.goRoom()})},goRoom:function(){t.navigateTo({url:"../IdentRoom/IdentRoom?id="+this.id+"&auth="+this.auth+"&type="+this.type+"&identTab="+this.identTab})},showReport:function(t){t.show=!t.show},subFinal:function(){if(0!=this.bagstyleIndex)if(1==this.identTab){var e={id:this.id,style:this.bagstyleList[this.bagstyleIndex].id,basis:this.yiju[this.yijuIndex].id,result:this.result[this.resultIndex].id,images:this.photoList};if(0==this.yijuIndex)return void t.showToast({icon:"none",title:"请选择鉴定依据"});if(0==this.resultIndex)return void t.showToast({icon:"none",title:"请选择鉴定结论"});this.$requestApi.goodsPost(e).then(function(e){t.showToast({icon:"none",title:"鉴定成功"}),setTimeout(function(){t.navigateBack()},1e3)})}else{var i={id:this.id,style:this.bagstyleList[this.bagstyleIndex].id,score:this.grades,describe:this.totalityTxt,details:JSON.stringify(this.data.details)},n=this.data.details.filter(function(t){return""==t.describe});if(n.length>0)return void t.showToast({icon:"none",title:"请填写描述"});if(0==this.grades)return void t.showToast({icon:"none",title:"总分最低不能低于0分"});if(this.grades>10)return void t.showToast({icon:"none",title:"总分不得超过上限10分"});this.$requestApi.onlinePost(i).then(function(e){t.showToast({icon:"none",title:"鉴定成功"}),setTimeout(function(){t.navigateBack()},1e3)})}else t.showToast({icon:"none",title:"请选择箱包款式"})},changeresult:function(t){this.resultIndex=t.detail.value},changeyiju:function(t){this.yijuIndex=t.detail.value,console.log(t,3333333)},changeBagstyle:function(t){console.log(t,"eeeeee"),this.bagstyleIndex=t.detail.value},takePhoto:function(e,i){var n=this;t.showActionSheet({itemList:["相机拍照","从相册中选择图片"],success:function(t){var e=t.tapIndex,o=["camera","album"];o=[o[e]],n.$uploadPhoto(o,function(t){n.photoList[i]=t.data,n.photoList.push(""),n.photoList.splice(2,1),console.log(n.photoList)})}})},getData:function(){var t=this,e={id:this.id};1==this.identTab?this.$requestApi.getGoodWait(e).then(function(e){console.log(e,"实物鉴定"),e.data["details"]=[],e.data["details"].push({score:0,show:0}),t.data=e.data,console.log(t.data,"获取实物鉴定的请选择"),e.data.style.forEach(function(t){t["value"]=t.id}),e.data.style.unshift({id:0,value:0,name:"请选择"}),t.bagstyleList=e.data.style}):this.$requestApi.getOnlineWait(e).then(function(e){console.log(e,"在线鉴定"),e.data.details.forEach(function(t){t["score"]="",t["show"]=""}),t.data=e.data,console.log(t.data,"获取请选择"),e.data.style.forEach(function(t){t["value"]=t.id}),e.data.style.unshift({id:0,value:0,name:"请选择"}),t.bagstyleList=e.data.style,console.log(t.bagstyleList)})}}};e.default=i}).call(this,i("543d")["default"])}},[["4d87","common/runtime","common/vendor"]]]);