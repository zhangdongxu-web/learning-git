(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/appraisalRoom/appraisalRoom"],{1190:function(t,e,i){"use strict";(function(t){i("5605"),i("921b");o(i("66fd"));var e=o(i("b086"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"7f3a":function(t,e,i){"use strict";var o=i("d0f4"),n=i.n(o);n.a},8171:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=t.getRecorderManager(),o=t.createInnerAudioContext(),n={data:function(){return{current:0,photoList:[],otherList:[],detailsImage:[],previewImgList:[],finishImg:[],end:!1,textFlag:!0,text:"",voicePath:"",voiceUrl:"",voiceNum:0,voiceLength:0,timer:"",record:!1,voicePlay:!1,data:{},id:"",name:"整体照"}},onLoad:function(e){var n=this;this.id=e.id,this.$requestApi.authdetails({id:this.id}).then(function(t){n.detailsImage=t.data.details}),this.getData(),i.onError(function(t){console.log("#######录音失败############")}),i.onStop(function(e){console.log("recorder stop"+JSON.stringify(e)),n.voicePath=e.tempFilePath,n.voiceNum=Math.round(e.duration/1e3),n.voiceLength=Math.round(e.duration/1e3),t.uploadFile({url:n.$upLoadUrl,filePath:n.voicePath,name:"avatar",header:{"content-type":"multipart/form-data"},formData:{pathname:"lisence"},success:function(t){console.log(t)}})}),o.onEnded(function(t){console.log("播放完毕"),n.voicePlay=!1,n.timer&&(n.voiceNum=n.voiceLength,clearInterval(n.timer))})},methods:{getData:function(){var t=this,e={id:this.id};this.$requestApi.authdetails(e).then(function(e){t.data=e.data,t.photoList=e.data.details,t.photoList.push({}),t.name=e.data.details[0].name})},submitInfo:function(){var e=this,i={id:this.id,details:this.finishImg,attach:{images:this.otherList,text:this.text,voice:this.voiceUrl}},o=this.photoList.length-1,n=i.details.length;o==n?(i.attach=JSON.stringify(i.attach),console.log(i),this.$requestApi.submitAppraisal(i).then(function(t){console.log(t.data),e.$refs.popupSuccess.open()})):t.showModal({title:"提示",content:"还剩 "+(o-n)+" 张照片没有上传",showCancel:!1})},playVoice:function(){var t=this;console.log(this.voicePath,"播放"),this.voicePlay=!0,this.timer&&clearInterval(this.timer),this.voicePath&&(o.src=this.voicePath,o.play(),this.timer=setInterval(function(){t.voiceNum>=1&&t.voiceNum--},1e3))},startRecord:function(){console.log("开始录音"),this.record=!0,i.start({duration:6e4,format:"mp3"})},endRecord:function(){console.log("录音结束"),this.record=!1,i.stop()},otherImg:function(){var e=this;t.showActionSheet({itemList:["相机拍照","从相册中选择图片"],success:function(i){var o=i.tapIndex,n=["camera","album"];n=[n[o]],e.$uploadPhoto(n,function(i){e.otherList.length<=3?e.otherList.push({image:i.data}):t.showModal({title:"提示",content:"最多上传三张",showCancel:!1})})}})},showVideo:function(){this.$refs.popupVideo.open()},swiperChange:function(t){this.current=t.detail.current,this.name=this.photoList[this.current].name,this.end=!1,t.detail.current==this.photoList.length-1&&(this.end=!0)},takePhoto:function(e){var i=this;console.log(e),t.showActionSheet({itemList:["相机拍照","从相册中选择图片"],success:function(t){var e=t.tapIndex,o=["camera","album"];o=[o[e]],i.$uploadPhoto(o,function(t){console.log(t.data,"232323232"),console.log(i.current,"数字下表"),i.photoList[i.current].image=t.data,0==i.current?i.finishImg[i.current]=JSON.stringify(i.photoList[i.current]):1==i.current?i.finishImg[i.current]=JSON.stringify(i.photoList[i.current]):2==i.current?i.finishImg[i.current]=JSON.stringify(i.photoList[i.current]):3==i.current?i.finishImg[i.current]=JSON.stringify(i.photoList[i.current]):console.log("您不能上传超过四张图片"),console.log(i.finishImg)})}})},previewImg:function(e,i){console.log(e,"item"),this.previewImgList=[e.image],t.previewImage({urls:this.previewImgList,longPressActions:{success:function(t){console.log(t)}}})}}};e.default=n}).call(this,i("543d")["default"])},"9ab7":function(t,e,i){"use strict";i.r(e);var o=i("8171"),n=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);e["default"]=n.a},"9e9a":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.textFlag=!t.textFlag})},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},b086:function(t,e,i){"use strict";i.r(e);var o=i("9e9a"),n=i("9ab7");for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);i("7f3a");var s=i("2877"),r=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,"2fb23e8b",null);e["default"]=r.exports},d0f4:function(t,e,i){}},[["1190","common/runtime","common/vendor"]]]);